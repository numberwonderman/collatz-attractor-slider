Spec Kit: Part 2 - Math Mapper (Final Draft)
Here is the finalized specification for the collatzMathMapper function. You can create the file math_mapper_spec.md now.

1. Primary Goal
To convert a sequence of large BigInts into a corresponding sequence of small, manageable integer coordinates that reflect the mathematical structure (residue classes) of the attractor.

2. Core Function Signature
The function MUST be exposed as:
function collatzMathMapper(bigIntSequence, q)

Parameter	Type	Required Constraint
bigIntSequence	BigInt[]	The sequence generated by the Engine (Part 1).
q	BigInt	The odd factor used in the Collatz rule.

Export to Sheets
3. Core Logic Requirements
The function MUST iterate through the bigIntSequence and perform the following mapping:

Index/Step Counter: The sequence element's array index determines the X coordinate.

Modulo q Filter: The sequence element's value determines the Y coordinate based on the remainder: Y=value(modq).

Output: The function MUST return an array of simple JavaScript Number objects, specifically a list of [X, Y] coordinate pairs.

4. TDD Requirements (Non-Negotiable)
The output MUST be an array of standard JavaScript Number types (not BigInts).

MUST include a test suite that verifies the mapping is correct.

The tests MUST cover:

Standard Path (3n+1): The Mapper must correctly handle a sequence where q=3n and map the remainders (mod3).

Generalized Path (5n+1): The Mapper must correctly handle a sequence where q=5n and map the remainders (mod5).